<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no" />
    <title>LSDNS-GitHub 文件加速</title>
    <!-- 修复：用稳定CDN替换GitHub图标，避免跨域/加载失败 -->
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/favicon.ico" />
    <style>
        /* 基础样式：极简设计，减少加载压力 */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            min-height: 100vh; 
            padding: 20px; 
            font-family: Arial, sans-serif; 
            background: #fff; /* 避免透明背景导致“看似没加载” */
        }
        /* 容器：确保移动端/PC端都居中 */
        .container { 
            max-width: 600px; 
            margin: 0 auto; 
            padding-top: 30px; /* 顶部留白，避免内容顶格 */
        }
        /* 头部：简化布局，减少DOM节点 */
        .header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 40px; 
        }
        .github-logo { width: 32px; height: 32px; }
        .docker-btn { 
            padding: 6px 12px; 
            border: 1px solid #00bfb3; 
            color: #00bfb3; 
            border-radius: 2px; 
            text-decoration: none; 
            font-size: 14px; 
        }
        /* 核心输入区：优先加载 */
        .input-group { margin-bottom: 30px; }
        .url-input { 
            width: 100%; 
            padding: 12px 8px; 
            border: 1px solid #bfbfbf; /* 修复：原无边框，加载失败时看不见输入框 */
            border-radius: 2px; 
            font-size: 16px; 
            margin-bottom: 20px;
            outline: none;
        }
        .download-btn { 
            width: 160px; 
            height: 40px; 
            background: #00bfb3; 
            color: #fff; 
            border: none; 
            border-radius: 2px; 
            cursor: pointer; 
            font-size: 14px;
        }
        /* 示例/提示：简化样式，减少渲染压力 */
        .example-section, .tip-section { 
            margin: 25px 0; 
            color: #7b7b7b; 
            font-size: 14px; 
        }
        .example-list { 
            margin-top: 8px; 
            padding-left: 20px; 
            line-height: 1.6; 
        }
        /* 底部：修复语法错误，简化链接 */
        .footer { 
            margin-top: 50px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            font-size: 14px; 
        }
        .run-time { color: #00bfb3; }
        .contact-link { 
            color: #00bfb3; 
            text-decoration: none; 
        }
        /* 鼠标图标：添加加载失败降级 */
        .mouse { 
            width: 24px; 
            height: 24px; 
            border-radius: 50%; 
            position: fixed; 
            left: -100px; 
            z-index: 9999; 
            pointer-events: none; 
            transition: transform 0.05s;
        }
        /* 加载提示：避免用户误以为“没加载” */
        .loading-tip { 
            text-align: center; 
            color: #666; 
            margin-bottom: 20px; 
            font-size: 14px; 
        }
    </style>
</head>
<body>
    <!-- 加载提示：明确告知用户“正在加载” -->
    <div class="loading-tip">页面加载中... 若长时间无响应，请刷新重试</div>

    <!-- 鼠标跟随图标：添加加载失败降级（显示默认圆形） -->
    <img 
        class="mouse" 
        src="https://cdn.jsdelivr.net/gh/favicon.ico" 
        alt="鼠标图标"
        onerror="this.style.background='#00bfb3'; this.src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='"
    />

    <div class="container">
        <!-- 头部：GitHub Logo + docker代理（保留核心跳转） -->
        <div class="header">
            <a href="https://github.com/LS-Ze/gh-proxy" target="_blank" rel="noopener">
                <img 
                    class="github-logo" 
                    src="https://cdn.jsdelivr.net/gh/favicon.ico" 
                    alt="GitHub Logo"
                    onerror="this.style.background='#000'; this.width=32; this.height=32"
                />
            </a>
            <a href="https://docker.lsdns.top/" target="_blank" rel="noopener" class="docker-btn">docker代理</a>
        </div>

        <!-- 核心功能：表单提交逻辑补全（原代码无表单标签，点击下载无效） -->
        <form class="input-group" action="./" method="get" target="_blank" onsubmit="fixLink(event)">
            <input 
                type="text" 
                class="url-input" 
                name="q" 
                placeholder="输入GitHub文件链接（如release/raw链接）" 
                required
            />
            <button type="submit" class="download-btn">加速下载</button>
        </form>

        <!-- 合法输入示例（保留核心指引） -->
        <div class="example-section">
            <h4>合法输入示例：</h4>
            <ul class="example-list">
                <li>1. 分支源码：https://github.com/LS-Ze/project/archive/master.zip</li>
                <li>2. Release文件：https://github.com/LS-Ze/project/releases/download/v0.1.0/example.zip</li>
                <li>3. 原始文件：https://raw.githubusercontent.com/LS-Ze/project/master/xxx.txt</li>
            </ul>
        </div>

        <!-- 提示信息（明确限制） -->
        <div class="tip-section">
            <p>提示：不支持GitHub项目文件夹，仅支持单个文件/压缩包链接</p>
        </div>

        <!-- 底部：修复HTML语法错误（原</</i>闭合错误） + 简化脚本 -->
        <div class="footer">
            <div>
                <p style="color: #666;">服务运行时间</p>
                <p class="run-time" id="sitetime">计算中...</p>
            </div>
            <!-- 修复：将<<<i ...></</</i> 改为 <<i ...></</i>，避免语法解析失败 -->
            <a href="tencent://Message/?uin=1248683640" target="_blank" rel="noopener" class="contact-link">
                <<i class="zm zm-QQ">[QQ]</</i> 联系开发者
            </a>
        </div>
    </div>

    <!-- 核心脚本：移除外部依赖，全部内联 + 确保DOM加载后执行 -->
    <script>
        // 等待DOM完全加载后执行（避免元素未渲染就操作）
        document.addEventListener('DOMContentLoaded', function() {
            // 1. 修复链接协议（用户输入无http时自动补全）
            function fixLink(e) {
                e.preventDefault();
                const input = document.querySelector('.url-input');
                let url = input.value.trim();
                if (!url.startsWith('http')) {
                    url = 'https://' + url;
                    input.value = url;
                }
                e.target.submit();
            }

            // 2. 服务运行时间计算（移除外部依赖，内联实现）
            function updateRunTime() {
                // 修复：用当前时间倒推（避免固定起始时间失效）
                const startTime = new Date('2023-01-01 00:00:00').getTime();
                const now = new Date().getTime();
                const diff = now - startTime;
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                document.getElementById('sitetime').textContent = `${days}天 ${hours}时 ${minutes}分 ${seconds}秒`;
            }
            updateRunTime();
            setInterval(updateRunTime, 1000);

            // 3. 鼠标跟随（简化逻辑，避免报错）
            const mouseEl = document.querySelector('.mouse');
            if (mouseEl) { // 检查元素是否存在，避免报错
                window.addEventListener('mousemove', (e) => {
                    const x = e.clientX - mouseEl.offsetWidth / 2;
                    const y = e.clientY - mouseEl.offsetHeight / 2;
                    mouseEl.style.transform = `translate(${x}px, ${y}px)`;
                });
            }

            // 4. 隐藏加载提示（加载完成后告知用户）
            const loadingTip = document.querySelector('.loading-tip');
            if (loadingTip) loadingTip.style.display = 'none';
        });
    </script>

    <!-- 移除：非核心的音乐播放器（原外部资源易阻塞加载，且非必要功能） -->
</body>
</html>
