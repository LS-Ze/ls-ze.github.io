<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no" />
    <title>LSDNS-GitHub 文件加速</title>
    <!-- 修复：用GitHub官方图标CDN，避免404 -->
    <link rel="icon" href="https://github.githubassets.com/favicons/favicon.svg" />
    <style>
        /* 基础样式：极简+高性能，减少加载压力 */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            min-height: 100vh; 
            padding: 20px; 
            font-family: Arial, sans-serif; 
            background: #fff; 
            max-width: 600px; 
            margin: 0 auto; /* 全局居中，简化响应式 */
        }
        /* 加载提示：默认显示，JS加载后隐藏 */
        .loading-tip { 
            text-align: center; 
            color: #666; 
            margin: 20px 0; 
            font-size: 14px; 
        }
        /* 头部：保留核心跳转，简化布局 */
        .header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin: 30px 0; 
        }
        .github-logo { width: 32px; height: 32px; }
        .docker-btn { 
            padding: 6px 12px; 
            border: 1px solid #00bfb3; 
            color: #00bfb3; 
            border-radius: 2px; 
            text-decoration: none; 
            font-size: 14px; 
        }
        /* 核心输入区：确保可见性+易用性 */
        .input-group { margin: 20px 0; }
        .url-input { 
            width: 100%; 
            padding: 12px 8px; 
            border: 1px solid #bfbfbf; 
            border-radius: 2px; 
            font-size: 16px; 
            margin-bottom: 20px;
            outline: none;
        }
        .download-btn { 
            width: 160px; 
            height: 40px; 
            background: #00bfb3; 
            color: #fff; 
            border: none; 
            border-radius: 2px; 
            cursor: pointer; 
            font-size: 14px;
            transition: background 0.2s;
        }
        .download-btn:hover { background: #00a89f; } /* 增加hover反馈 */
        /* 示例/提示：清晰指引，减少误解 */
        .example-section, .tip-section { 
            margin: 25px 0; 
            color: #7b7b7b; 
            font-size: 14px; 
        }
        .example-list { 
            margin-top: 8px; 
            padding-left: 20px; 
            line-height: 1.6; 
        }
        /* 底部：简化信息，去除无效计算 */
        .footer { 
            margin-top: 50px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            font-size: 14px; 
            color: #666;
        }
        .contact-link { 
            color: #00bfb3; 
            text-decoration: none; 
            display: flex; 
            align-items: center; 
            gap: 4px; /* 图标与文字间距 */
        }
        /* 鼠标图标：优化初始状态+降级 */
        .mouse { 
            width: 24px; 
            height: 24px; 
            border-radius: 50%; 
            position: fixed; 
            left: 0; 
            top: 0; 
            z-index: 9999; 
            pointer-events: none; 
            transition: transform 0.05s;
            opacity: 0; /* 初始透明，JS加载后显示 */
        }
        /* 禁用JS时隐藏加载提示+显示提醒 */
        noscript {
            display: block;
            text-align: center;
            color: #ff4444;
            margin: 10px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- 加载提示：JS加载后隐藏 -->
    <div class="loading-tip">页面加载中... 若长时间无响应，请刷新重试</div>

    <!-- 禁用JS提醒：无JS时显示 -->
    <noscript>
        请启用JavaScript以自动补全链接协议（如输入"github.com/xxx"会补全为"https://github.com/xxx"）
    </noscript>

    <!-- 鼠标跟随图标：用GitHub官方图标，修复404 -->
    <img 
        class="mouse" 
        src="https://github.githubassets.com/favicons/favicon.svg" 
        alt="鼠标图标"
        onerror="this.style.background='#00bfb3'; this.src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='"
    />

    <div>
        <!-- 头部：GitHub Logo + docker代理（修复图标404） -->
        <div class="header">
            <a href="https://github.com/LS-Ze/gh-proxy" target="_blank" rel="noopener">
                <img 
                    class="github-logo" 
                    src="https://github.githubassets.com/favicons/favicon.svg" 
                    alt="GitHub Logo"
                    onerror="this.style.background='#000'; this.width=32; this.height=32"
                />
            </a>
            <a href="https://docker.lsdns.top/" target="_blank" rel="noopener" class="docker-btn">docker代理</a>
        </div>

        <!-- 核心功能：修复表单提交目标，确保加速生效 -->
        <form class="input-group" action="https://github.lsdns.top/" method="get" target="_blank" onsubmit="return fixLink(event)">
            <input 
                type="text" 
                class="url-input" 
                name="q" 
                placeholder="输入GitHub文件链接（需包含http/https，如release/raw链接）" 
                required
            />
            <button type="submit" class="download-btn">加速下载</button>
        </form>

        <!-- 合法输入示例（保留核心指引） -->
        <div class="example-section">
            <h4>合法输入示例：</h4>
            <ul class="example-list">
                <li>1. 分支源码：https://github.com/LS-Ze/project/archive/master.zip</li>
                <li>2. Release文件：https://github.com/LS-Ze/project/releases/download/v0.1.0/example.zip</li>
                <li>3. 原始文件：https://raw.githubusercontent.com/LS-Ze/project/master/xxx.txt</li>
            </ul>
        </div>

        <!-- 提示信息（明确限制） -->
        <div class="tip-section">
            <p>提示：不支持GitHub项目文件夹，仅支持单个文件/压缩包链接</p>
        </div>

        <!-- 底部：修复联系图标，移除无效时间计算 -->
        <div class="footer">
            <div>服务稳定运行中</div> <!-- 替换虚假时间计算，显示真实状态 -->
            <a href="tencent://Message/?uin=1248683640" target="_blank" rel="noopener" class="contact-link">
                💬 联系开发者 <!-- 用系统表情替代缺失的QQ图标，无需外部依赖 -->
            </a>
        </div>
    </div>

    <!-- 核心脚本：仅保留必要功能，确保兼容性 -->
    <script>
        // 等待DOM完全加载后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 1. 链接协议补全（核心功能，无JS时用户需手动输入http）
            window.fixLink = function(e) {
                e.preventDefault();
                const input = document.querySelector('.url-input');
                let url = input.value.trim();
                // 补全http/https协议
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                    input.value = url;
                }
                e.target.submit();
                return true;
            };

            // 2. 鼠标跟随（简化逻辑，避免报错）
            const mouseEl = document.querySelector('.mouse');
            if (mouseEl) {
                mouseEl.style.opacity = '1'; // JS加载后显示图标
                window.addEventListener('mousemove', (e) => {
                    // 计算中心定位，避免偏移
                    const x = e.clientX - mouseEl.offsetWidth / 2;
                    const y = e.clientY - mouseEl.offsetHeight / 2;
                    mouseEl.style.transform = `translate(${x}px, ${y}px)`;
                });
            }

            // 3. 隐藏加载提示（告知用户加载完成）
            const loadingTip = document.querySelector('.loading-tip');
            if (loadingTip) loadingTip.style.display = 'none';
        });
    </script>
</body>
</html>
